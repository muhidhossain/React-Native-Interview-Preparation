# Native Modules & Native UI Components (React Native Interview Preparation)

---

## Overview

React Native is built on a **bridge** that connects JavaScript to the underlying native platforms (iOS/Android). When JS cannot do something natively, you extend functionality via:

- **Native Modules** ‚Üí Expose native platform APIs to JavaScript.
- **Native UI Components** ‚Üí Create or wrap native views so they can be used in JSX.

Let's break them down.

---

## üéØ 1. Native Modules (Non-UI)

A **Native Module** allows you to call native code (Swift/Obj-C/Kotlin/Java) from JavaScript.

---

### üß† Why Native Modules?

Use when JS/React Native can't do something efficiently or it's simply unavailable:

- Access low-level device APIs (Bluetooth, NFC, sensors)
- Heavy computation native libraries (encryption, image processing, ML)
- Background services
- Platform SDKs not available in JS

---

### üîß How Native Modules Work (Simple Flow)

```
JavaScript --> React Native Bridge --> Native Code (iOS/Android)
```

JS calls a method ‚Üí bridge serializes data ‚Üí native method executes ‚Üí returns a Promise/event back.

---

### üìù Example (Conceptual)

#### JS side

```javascript
import { NativeModules } from 'react-native';

NativeModules.DeviceInfoModule.getBatteryLevel().then((level) => {
  console.log('Battery level:', level);
});
```

#### Native side (Android ‚Äì Kotlin)

```kotlin
class DeviceInfoModule(reactContext: ReactApplicationContext)
  : ReactContextBaseJavaModule(reactContext) {

  override fun getName() = "DeviceInfoModule"

  @ReactMethod
  fun getBatteryLevel(promise: Promise) {
    val level = ... // fetch using Android API
    promise.resolve(level)
  }
}
```

---

### ‚≠ê Key Points to Say in an Interview

- Native Modules are **non-UI**, used for **bridging platform APIs to JS**.
- They return **Promises, callbacks, or send events** to JS.
- Used when RN/existing JS libraries are insufficient.
- They run on a **separate native thread**, not on JS thread.

---

## üéØ 2. Native UI Components

**Native UI components** allow you to render **native views** inside React Native.

These are required when:

- You need a custom view not provided by RN (Camera2 API, MapView, VideoView)
- You want to wrap an existing native SDK that outputs UI
- You need high-performance UI (e.g., 3D graphics, charts, AR)

---

### üîß How Native UI Components Work (Simple Flow)

```
JSX View ‚Üí Native Shadow Node ‚Üí Native UI Manager ‚Üí Native iOS/Android View
```

---

### üìù Example (Conceptual)

#### JS side

```javascript
import { requireNativeComponent } from 'react-native';

const MyNativeMapView = requireNativeComponent('MyNativeMapView');

export default function App() {
  return <MyNativeMapView style={{ height: 300, width: '100%' }} />;
}
```

#### Native side (Android ‚Äì Kotlin)

```kotlin
class MyNativeMapView(context: Context) : MapView(context)

class MyNativeMapManager : SimpleViewManager<MyNativeMapView>() {
  override fun getName() = "MyNativeMapView"

  override fun createViewInstance(reactContext: ThemedReactContext) =
    MyNativeMapView(reactContext)
}
```

---

### ‚≠ê Key Points to Say in an Interview

- Native UI Components are used for **creating/wrapping native views**.
- Exposed via `requireNativeComponent`.
- You can **map JS props ‚Üí native view properties**.
- Useful for complex UI, custom animations, native maps, video players, AR views, etc.

---

## üî• Native Modules vs Native UI Components (Interview Comparison Table)

| Feature        | Native Module                 | Native UI Component        |
| -------------- | ----------------------------- | -------------------------- |
| Purpose        | Access native APIs (non-UI)   | Create/render native views |
| Used for       | Sensors, files, crypto, etc.  | Camera, Map, Video, charts |
| JS API         | `NativeModules.*`             | `requireNativeComponent`   |
| UI involvement | ‚ùå No UI                      | ‚úÖ Renders UI              |
| Thread         | Runs on native worker threads | Runs on UI thread          |
| Best for       | Logic                         | UI                         |

---

## ‚ö° Common Interview Questions & Answers

### 1Ô∏è‚É£ Why do we need Native Modules?

Because not all device capabilities are exposed in JS. Native Modules let us use platform APIs like **Bluetooth, NFC, biometrics, sensors**, etc.

---

### 2Ô∏è‚É£ When do we create Native UI components?

When you need a **custom native view** (e.g., CameraX, MapKit) or a UI component with **performance beyond RN's built-in views**.

---

### 3Ô∏è‚É£ How does JS communicate with native code?

Using the **React Native Bridge**. Data is serialized and passed asynchronously between JS and native threads.

---

### 4Ô∏è‚É£ What is the new architecture? (Interview bonus)

In the new architecture:

- **JSI** replaces the old bridge
- You use **TurboModules** (instead of classic native modules)
- **Fabric UI Manager** replaces old UI Manager for native UI components

---

## üß™ Bonus: Explain Native Modules in the New Architecture

If asked:

> "In the new architecture, the bridge is removed. Communication is direct using **JSI**, making it faster and synchronous where needed."
