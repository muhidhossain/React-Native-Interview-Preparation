# React Native Testing Library (RNTL) â€” Interview Preparation

---

## What is React Native Testing Library?

**React Native Testing Library** is a testing utility built on top of **React Test Renderer + Jest**.
Its goal is to help you test React Native UI **the way a user interacts with it**, not the implementation details.

It is based on the same principles as **React Testing Library** (web version).

---

## ðŸŽ¯ Why React Native Testing Library?

Because it focuses on:

### âœ” Testing behavior, not internals

You test what the user sees and does, instead of testing component internals like state or methods.

### âœ” More reliable and less brittle tests

UI changes (like refactoring or reordering elements) do not break tests.

### âœ” Accessible queries

You access elements by:

- `getByText`
- `getByRole`
- `getByTestId`
- `getByPlaceholderText`

â€¦same as a real user would find them.

### âœ” Works perfectly with Jest

RNTL provides **render + user interactions**, Jest provides **test runner, mocks, assertions**.

---

## ðŸ§© Core Concepts

### 1. Rendering a Component

```javascript
import { render } from '@testing-library/react-native';
import MyComponent from '../MyComponent';

test('renders correctly', () => {
  const { getByText } = render(<MyComponent />);
  expect(getByText('Hello World')).toBeTruthy();
});
```

---

### 2. Queries

Queries help find elements:

| Query                  | Description                                  |
| ---------------------- | -------------------------------------------- |
| `getByText`            | must exist or test fails                     |
| `queryByText`          | returns null if not found                    |
| `findByText`           | async version (awaits for element to appear) |
| `getByTestId`          | using `testID` prop                          |
| `getByPlaceholderText` | TextInput placeholder                        |
| `getAllBy...`          | returns multiple items                       |

**Example:**

```javascript
const button = getByText('Submit');
```

---

### 3. Firing Events

To simulate user actions, use `fireEvent`:

#### Press a button

```javascript
import { fireEvent } from '@testing-library/react-native';

fireEvent.press(getByText('Login'));
```

#### Change text in TextInput

```javascript
fireEvent.changeText(getByPlaceholderText('Email'), 'muhid@test.com');
```

---

### 4. Async Testing

Many React Native components run async tasks (API calls, navigationâ€¦).

Use `findBy...` or `waitFor`.

#### Example with findByText:

```javascript
const result = await findByText('Loaded!');
expect(result).toBeTruthy();
```

#### Example with waitFor:

```javascript
await waitFor(() => {
  expect(getByText('Done')).toBeTruthy();
});
```

---

### 5. Mocking APIs

React Native APIs (AsyncStorage, fetch, navigation, etc.) usually need mocking.

#### Mocking fetch:

```javascript
global.fetch = jest.fn(() =>
  Promise.resolve({
    json: () => Promise.resolve({ name: 'John' }),
  })
);
```

#### Mocking navigation:

```javascript
const mockNavigation = {
  navigate: jest.fn(),
};

render(<HomeScreen navigation={mockNavigation} />);
```

---

## ðŸ“ Example Test: Button Click Updates UI

```javascript
import { render, fireEvent } from '@testing-library/react-native';
import Counter from '../Counter';

test('increments counter on button press', () => {
  const { getByText } = render(<Counter />);

  const button = getByText('Increment');

  fireEvent.press(button);

  expect(getByText('Count: 1')).toBeTruthy();
});
```

---

## ðŸ“± Example Test: Form Validation

```javascript
test('shows error when email is empty', () => {
  const { getByText, getByPlaceholderText } = render(<Login />);

  const btn = getByText('Login');
  fireEvent.press(btn);

  expect(getByText('Email is required')).toBeTruthy();
});
```

---

## âš™ Mocking Native Modules (Important for RN interviews)

Many React Native modules need manual mocks:

- AsyncStorage
- `react-native/Libraries/Animated`
- `react-native-reanimated`
- `react-native-permissions`
- `@react-navigation/native`

**Example:**

```javascript
jest.mock('@react-native-async-storage/async-storage', () =>
  require('@react-native-async-storage/async-storage/jest/async-storage-mock')
);
```

---

## â­ Common Interview Questions

### 1. What is React Native Testing Library?

A **user-centric testing library** that helps test UI behavior instead of implementation details.

---

### 2. What is the difference between RNTL and Enzyme?

| RNTL             | Enzyme                        |
| ---------------- | ----------------------------- |
| Behavior focused | Implementation focused        |
| Recommended      | Deprecated                    |
| Works with RN    | Not compatible with latest RN |

---

### 3. What are the types of queries?

- `getBy...`
- `queryBy...`
- `findBy...`
- `getAllBy...`

---

### 4. How do you test a TextInput?

Using `getByPlaceholderText` + `fireEvent.changeText`.

---

### 5. How to test API calls in React Native?

Mock `fetch` or `Axios` using Jest.

---

### 6. How to test navigation?

Mock navigation object & assert `navigate` was called.

---

### 7. When to use waitFor vs findBy...?

| Use Case                           | Method      |
| ---------------------------------- | ----------- |
| Waiting for an element to appear   | `findBy...` |
| Waiting for any async state change | `waitFor`   |

---

## ðŸŽ“ Final Summary (Interview-Ready)

> React Native Testing Library helps you write clean, reliable, user-focused tests for your components. It uses Jest under the hood and provides APIs to:
>
> - render components,
> - query views by accessible attributes,
> - fire user events,
> - handle async updates,
> - mock native modules and network requests.
>
> **It encourages testing what the user sees, not the implementation.**
