# Snapshot Tests — React Native Interview Preparation

---

## 1. What is a Snapshot Test?

A **snapshot test** is a type of test where the rendered output of a React Native component is captured and saved as a file (a "snapshot").
In future test runs, Jest checks if the component's output still matches the saved snapshot.

- **If it changes** → Jest warns you (test fails).
- **If it's expected** → you update the snapshot.

---

## ✅ 2. Why do we use Snapshot Testing?

Snapshot tests help ensure that:

- UI doesn't change unexpectedly
- Refactoring does not break layouts
- Component changes are intentional
- Large UI components can be tested quickly

It is mostly used for **visual consistency, not functionality**.

---

## ✅ 3. How Snapshot Testing Works

1. Component renders in memory (using `react-test-renderer` or RNTL).
2. Jest converts the render result into a **JSON structure**.
3. Jest stores that JSON in a **`.snap` file**.
4. Future tests compare actual output to the snapshot file.

**Example snapshot file content:**

```javascript
exports[`renders correctly 1`] = `
<View>
  <Text>Hello World</Text>
</View>
`;
```

---

## ✅ 4. How to Write a Snapshot Test (React Native)

### Using react-test-renderer:

```javascript
import React from 'react';
import renderer from 'react-test-renderer';
import MyComponent from '../MyComponent';

test('renders correctly', () => {
  const tree = renderer.create(<MyComponent />).toJSON();
  expect(tree).toMatchSnapshot();
});
```

### Using React Native Testing Library (RNTL):

```javascript
import { render } from '@testing-library/react-native';
import MyComponent from '../MyComponent';

test('snapshot test', () => {
  const screen = render(<MyComponent />);
  expect(screen.toJSON()).toMatchSnapshot();
});
```

---

## ✅ 5. When Should You Use Snapshot Tests?

### Good use cases:

- Static UI components
- Presentational components
- Reusable UI blocks (buttons, cards, modals)
- Components that rarely change

### Avoid for:

- Dynamic components (changing state, props)
- Complex UI that changes often
- Components depending on APIs or context
- Interaction-heavy components

**For those, use RNTL + queries + assertions instead.**

---

## ✅ 6. Pros & Cons (Interview-Ready)

### ✔ Pros

- Fast and easy to create
- Good for UI consistency
- Detects unintentional UI changes
- Reduces regression bugs

### ✘ Cons

- Can generate large snapshots
- Easy to update without thinking → false confidence
- Fails too often if UI changes frequently
- Doesn't test actual behavior (just structure)

---

## ✅ 7. Common Interview Questions & Answers

### Q1: What does a snapshot test actually verify?

It verifies that the component's **rendered output** matches the previously saved snapshot.
It does **not** test business logic or user interaction.

---

### Q2: What causes snapshot tests to fail?

- UI structure changed
- Text/props changed
- Styling change affects the render tree
- Developers intentionally refactored the component

---

### Q3: When would you NOT use snapshot tests?

When the component:

- Changes frequently
- Is interactive (buttons, gestures, animations)
- Relies on dynamic data

**Better alternative:** React Native Testing Library functional tests.

---

### Q4: How do you update a snapshot?

From CLI:

```bash
jest -u
```

or

```bash
npm test -- -u
```

---

### Q5: Snapshot Testing vs RNTL — which is better?

- **Snapshot:** checks UI structure
- **RNTL:** checks behavior and user interactions

**RNTL is preferred for production apps.**
Snapshot tests are optional and supplemental.

---

## ✅ 8. Short Interview Summary Answer (Use this in interviews)

> "Snapshot testing in React Native is a way to verify UI consistency. Jest saves the rendered output of a component as a snapshot file. Future test runs compare the component to that snapshot to catch unintended UI changes. It's great for stable presentational components but not ideal for dynamic or interactive components. For behavior testing, I rely on React Native Testing Library instead."
