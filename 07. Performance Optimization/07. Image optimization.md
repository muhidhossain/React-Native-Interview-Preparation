# Image Optimization in React Native

Image optimization is the process of reducing image size and memory usage while maintaining acceptable quality, to ensure:

- Faster app loading
- Smoother scrolling
- Lower memory consumption
- Reduced crashes (especially on low-end devices)

In React Native, images are often the biggest performance bottleneck.

---

## Why Image Optimization Is Important (Interview-ready)

In React Native:

- Images are loaded into native memory

Large images can cause:

- Slow screen rendering
- Janky scroll performance
- Out-of-memory (OOM) crashes
- Increased data usage

---

## Common Image Optimization Techniques

### 1. Use Correct Image Formats

Choose the right image format:

- **JPEG** → photos (smaller file size)
- **PNG** → transparency, icons
- **WebP** → best compression (supported on Android, newer iOS)

✅ Interview tip: WebP reduces image size significantly without quality loss.

### 2. Resize Images to Display Size

Do not load very large images and scale them down in UI.

❌ Bad:

```jsx
<Image
  source={{ uri: '4000x4000-image.jpg' }}
  style={{ width: 100, height: 100 }}
/>
```

✅ Good:

Request or upload images already close to the display size (e.g., 100x100) and prefer server-side resizing or CDN transforms.

### 3. Use `resizeMode` Properly

Control how images fit inside their container:

```jsx
<Image source={{ uri: imageUrl }} resizeMode="cover" />
```

Common values:

- `cover` → fills container (most common)
- `contain` → fits entire image
- `stretch` → avoid unless needed

✅ Interview tip: Wrong `resizeMode` can cause overdrawing and unnecessary GPU work.

### 4. Avoid Inline Image Objects

Inline objects re-create on every render and can harm performance.

❌ Bad:

```jsx
<Image source={{ uri: imageUrl }} />
```

✅ Better:

```jsx
const imageSource = useMemo(() => ({ uri: imageUrl }), [imageUrl]);
<Image source={imageSource} />;
```

### 5. Use Image Caching

React Native does not aggressively cache remote images by default.

✅ Solutions:

- Use libraries like `react-native-fast-image` for native caching and priority loading
- Configure HTTP cache headers on CDN

Example with FastImage:

```jsx
<FastImage
  source={{ uri: url, priority: FastImage.priority.normal }}
  resizeMode={FastImage.resizeMode.cover}
/>
```

✅ Interview tip: Proper caching avoids repeated network calls and improves scrolling performance.

### 6. Use CDN for Remote Images

Use a CDN (Cloudinary, Cloudflare, AWS CloudFront) to:

- Resize images dynamically
- Choose optimal quality
- Serve from the nearest data center

Example: `?w=300&q=70` → smaller & faster images

### 7. Lazy Load Images (Especially in Lists)

Load images only when they appear on screen. With `FlatList`, combine `removeClippedSubviews`, appropriate `windowSize`, and a performant image component.

```jsx
<FlatList
	removeClippedSubviews={true}
	windowSize={5}
	...
/>
```

✅ Interview tip: Lazy loading prevents unnecessary memory allocation in long lists.

### 8. Avoid Using Base64 Images

❌ Base64 images:

- Increase size by ~33%
- Increase memory usage

✅ Use static assets or remote image URLs instead.

### 9. Use Proper Image Components

Use `Image` for simple cases and `FastImage` (or similar) for heavy image usage, caching, and feed-style apps.

| Component   | Use Case                    |
| ----------- | --------------------------- |
| `Image`     | Simple, few images          |
| `FastImage` | Caching, performance, lists |

### 10. Reduce Re-renders of Images

Images re-render when parent re-renders or when sources/styles change. Avoid this by using:

- `React.memo` for image item components
- Stable props via `useMemo` and `useCallback`

---

## Common Interview Q&A

Q: Why do images cause performance issues in React Native?

A: Images consume native memory, and large or unoptimized images increase decoding time, memory usage, and can cause janky UI or crashes, especially in scrollable lists.

Q: How do you optimize images in `FlatList`?

A: Use proper image sizes, enable caching, lazy-load images, use `FastImage`, and tune `FlatList` props (e.g., `getItemLayout`, `windowSize`, `removeClippedSubviews`).

---

## One-Line Summary

Image optimization in React Native focuses on reducing image size, memory usage, and re-renders through proper formats, resizing, caching, and lazy loading to ensure smooth performance.
