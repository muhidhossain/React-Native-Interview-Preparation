# Using useCallback & useMemo â€” Performance Optimization

---

## Why useCallback and useMemo exist

In React Native, every re-render recreates functions and recalculates values.

This can cause:

- Unnecessary re-renders of child components
- Performance issues in large lists (FlatList)
- Wasted CPU work (expensive calculations)

**âœ… Hooks solve this by memoizing (remembering) references.**

---

## useCallback

### âœ… What it does

`useCallback` **memoizes a function** so the same function reference is reused between renders.

> "Don't recreate this function unless dependencies change."

### âœ… Syntax

```javascript
const memoizedFn = useCallback(() => {
  // function logic
}, [dependencies]);
```

### âœ… Example (React Native)

```javascript
const handlePress = useCallback(() => {
  console.log('Button pressed');
}, []);

return <Button title="Press" onPress={handlePress} />;
```

âœ… The `handlePress` function won't be recreated on re-renders.

### âœ… When to use useCallback

âœ” Passing functions to:

- `React.memo` components
- FlatList â†’ `renderItem`
- `useEffect` dependencies

âœ” Avoiding unnecessary child re-renders

### âŒ When not to use

- Simple components
- Functions not passed as props
- Premature optimization

---

## useMemo

### âœ… What it does

`useMemo` **memoizes a computed value** so it's not recalculated unless dependencies change.

> "Don't recompute this value unless inputs change."

### âœ… Syntax

```javascript
const memoizedValue = useMemo(() => {
  return expensiveCalculation();
}, [dependencies]);
```

### âœ… Example (React Native)

```javascript
const totalPrice = useMemo(() => {
  return items.reduce((sum, item) => sum + item.price, 0);
}, [items]);
```

âœ… `totalPrice` recalculates only when `items` changes.

### âœ… When to use useMemo

âœ” Expensive calculations  
âœ” Filtering/sorting large arrays  
âœ” Prevent recalculations in re-renders

### âŒ When not to use

- Cheap calculations
- Small arrays
- Just to "follow best practices"

---

## ðŸ”¥ Key Differences (Interview Favorite)

| Feature          | useCallback               | useMemo                |
| ---------------- | ------------------------- | ---------------------- |
| Memoizes         | Function                  | Value                  |
| Returns          | Function reference        | Computed result        |
| Used for         | Event handlers, callbacks | Expensive calculations |
| Performance gain | Prevent child re-renders  | Prevent recomputation  |

---

## âœ… Relation to React.memo

- `useCallback` â†’ memoizes functions
- `useMemo` â†’ memoizes values
- `React.memo` â†’ memoizes components

**ðŸ‘‰ They work best together**

---

## âš ï¸ Common Interview Pitfalls

âŒ Using them everywhere  
âŒ Forgetting dependency array  
âŒ Using `useCallback` instead of `useMemo`  
âŒ Assuming they prevent all re-renders

---

## One-Line Interview Answers

### âœ… useCallback:

> "Used to memoize functions to prevent unnecessary re-renders."

### âœ… useMemo:

> "Used to memoize expensive computed values for performance optimization."
