# Email–Password Authentication Flow in React Native

---

## 1. What is Email–Password Authentication?

**Email–password authentication** is a credential-based authentication flow where a user logs in using an email address and a password.
The client (React Native app) collects credentials, and the backend server validates them and issues a **token** (usually JWT) for authenticated access.

---

## 2. High-level Authentication Flow

### Step 1: User enters credentials

- User enters **email + password** in the React Native UI.
- Input validation happens on the client:
  - Email format
  - Password length / rules

---

### Step 2: Credentials sent to backend

App sends credentials via **HTTPS POST** request to backend (e.g. `/login`).

```http
POST /login
{
  email: "user@example.com",
  password: "*******"
}
```

✅ **Important:** Password is never stored or validated on the client.

---

### Step 3: Backend verification

Backend does the following:

1. Finds user by email
2. Hashes the incoming password
3. Compares it with the stored hashed password (e.g. bcrypt)
4. If valid → generates an **access token (JWT)**

---

### Step 4: Token returned to client

Backend sends back:

- **Access token** (JWT)
- **Optional refresh token**
- User profile info

```json
{
  "accessToken": "jwt_token_here",
  "refreshToken": "refresh_token_here"
}
```

---

### Step 5: Store token securely in React Native

In React Native, tokens should be stored using **secure storage**:

- ✅ Expo SecureStore
- ✅ Keychain (iOS)
- ✅ Keystore (Android)

❌ **Avoid AsyncStorage** for sensitive tokens (not encrypted).

---

### Step 6: Authenticated requests

For every protected API call, the app sends the token in the header:

```http
Authorization: Bearer <accessToken>
```

Backend validates token and authorizes request.

---

### Step 7: Logout

1. Remove tokens from secure storage
2. Clear app auth state
3. Redirect to login screen

---

## 3. Token Expiration & Refresh Flow

- **Access tokens are short-lived.**
- When expired:
  1. App sends **refresh token** to backend
  2. Backend issues **new access token**
  3. If refresh token is invalid → **force logout**.

✅ Interviewers like when you mention **refresh token flow**.

---

## 4. Email–Password Sign-Up Flow (Short)

1. User enters email + password
2. Backend **hashes password** & stores it
3. Optional **email verification link** sent
4. User logs in after verification

---

## 5. Security Considerations (Very Important for Interviews)

Interviewers often test this part.

- ✅ Use **HTTPS only**
- ✅ Never store raw passwords
- ✅ Use **salted password hashing** (bcrypt/argon2)
- ✅ Store tokens securely
- ✅ Protect endpoints with token validation
- ✅ Rate-limit login attempts (prevent brute force)

---

## 6. Typical React Native Implementation Stack

- **API calls:** fetch / axios
- **State:** Context API / Redux / Zustand
- **Storage:** SecureStore / Keychain
- **Navigation:** Auth stack vs App stack
- **Backend:** Node.js, Firebase Auth, Django, etc.

---

## 7. Common Interview Question & Answer

### Q: Why not store token in AsyncStorage?

**A:** AsyncStorage is not encrypted and is vulnerable on rooted/jailbroken devices. SecureStore or OS-level keychain should be used.

### Q: What happens after app restart?

**A:** App loads token from secure storage, validates it, and restores the user session if valid.

### Q: Can passwords be encrypted on frontend?

**A:** No. Password handling and hashing should only be done on the backend.

---

## 8. 1-Line Interview Summary

> "In a React Native app, email–password auth involves sending credentials securely to a backend, receiving a token on success, storing it in secure storage, attaching it to API requests, handling token expiration, and securely logging out."
