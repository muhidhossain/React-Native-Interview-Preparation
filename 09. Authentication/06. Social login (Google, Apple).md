# Social Login (Google & Apple) in React Native ‚Äî Interview-Ready Explanation

---

## ‚úÖ What is Social Login?

**Social login** allows users to authenticate using existing accounts like **Google** or **Apple ID**, instead of creating new usernames/passwords. In React Native apps, these logins rely on **OAuth 2.0** or **OpenID Connect** flows, provided through SDKs or libraries.

### üîπ Benefits of Social Login

Social login integrates third-party authentication providers to:

- Simplify login
- Increase conversions
- Reduce password management
- Improve security using provider-based identity verification

The common providers are:

- **Google Sign-In**
- **Apple Sign-In** (mandatory on iOS if app uses any other social login)

---

## üîπ How Google Login Works (React Native)

### ‚úîÔ∏è Common libraries:

- `@react-native-google-signin/google-signin` (standard)
- Or through **Firebase Auth** (Expo apps often use Firebase)

### ‚úîÔ∏è Setup steps:

1. Create project in **Google Cloud Console**.
2. Generate **OAuth client IDs**:
   - **iOS:** REVERSED_CLIENT_ID
   - **Android:** SHA-1 fingerprint + package name.
3. Configure the library with the client IDs.
4. Call `GoogleSignin.signIn()`.

### ‚úîÔ∏è Typical flow:

1. App opens Google's auth window.
2. User selects an account.
3. Google returns an **ID token**.
4. Your app sends this token to backend or Firebase.
5. Backend verifies token with Google.

### ‚úîÔ∏è Sample code:

```javascript
import { GoogleSignin } from '@react-native-google-signin/google-signin';

GoogleSignin.configure({
  webClientId: 'your-web-client-id',
});

const signIn = async () => {
  await GoogleSignin.hasPlayServices();
  const userInfo = await GoogleSignin.signIn();
  console.log(userInfo);
};
```

### ‚úîÔ∏è Interview Talking Points:

- Needs **Google Play Services** (Android)
- Requires **SHA-1 fingerprints**
- **ID token** ‚Üí backend verification
- For Expo: use Google Auth via `expo-auth-session` or Firebase

---

## üîπ How Apple Login Works (React Native)

### ‚úîÔ∏è Common libraries:

- `@invertase/react-native-apple-authentication`
- Or **Firebase Auth's Apple provider**

### ‚úîÔ∏è iOS Requirement:

If an app offers any third-party login (Google/Facebook) and is published on iOS, Apple demands:

> **"Sign in with Apple" must also be offered.**

### ‚úîÔ∏è Flow:

1. App triggers AppleAuth request.
2. Apple returns:
   - `identityToken`
   - `authorizationCode`
   - `user name` (only FIRST time!)
3. App sends token to backend/Firebase to verify.

### ‚úîÔ∏è Sample code:

```javascript
import appleAuth, {
  AppleAuthRequestScope,
  AppleAuthRequestOperation,
} from '@invertase/react-native-apple-authentication';

async function onAppleButtonPress() {
  const response = await appleAuth.performRequest({
    requestedOperation: AppleAuthRequestOperation.LOGIN,
    requestedScopes: [
      AppleAuthRequestScope.EMAIL,
      AppleAuthRequestScope.FULL_NAME,
    ],
  });

  console.log(response);
}
```

### ‚úîÔ∏è Important Notes:

- **User's name and email are only returned on the first login.**
- You must securely store Apple's user identifier (`user` field).
- Works only on **iOS 13+**.
- No web view shown: uses native Apple login sheet.

---

## üîπ Google vs Apple Sign-In: Key Differences

| Feature                      | Google Sign-In         | Apple Sign-In                        |
| ---------------------------- | ---------------------- | ------------------------------------ |
| Platforms                    | iOS, Android           | iOS only                             |
| Required by Apple policy?    | ‚ùå No                  | ‚úîÔ∏è Yes if using another social login |
| Token returned               | ID token, access token | ID token, authorization code         |
| Data provided                | Name, email, avatar    | Name & email (only first login)      |
| Native UI                    | Yes                    | Yes                                  |
| Works without web client ID? | No                     | Yes                                  |

---

## üîπ When Using Firebase Auth

Firebase simplifies handling tokens.

### ‚úîÔ∏è Flow:

1. Sign in with Google/Apple ‚Üí get ID token.
2. Pass to Firebase ‚Üí Firebase creates user session.
3. No need to verify ID token manually.

### Example (Google + Firebase):

```javascript
const googleCredential = auth.GoogleAuthProvider.credential(idToken);
return auth().signInWithCredential(googleCredential);
```

### Example (Apple + Firebase):

```javascript
const appleCredential = auth.AppleAuthProvider.credential(identityToken, nonce);
auth().signInWithCredential(appleCredential);
```

---

## üîπ Common Interview Questions (and answers)

### 1. Why is Apple Sign-In mandatory on iOS?

‚Üí Apple requires it if the app uses any other social login for **privacy and fairness** reasons.

---

### 2. Why use webClientId for Google Sign-In?

‚Üí Needed to get an **ID token** for backend or Firebase verification.

---

### 3. What is the difference between ID token and access token?

- **ID token** = identity of user (JWT)
- **Access token** = permission to access Google APIs

---

### 4. Why does Apple return the name only once?

‚Üí For **privacy**. You must store it on the first login.

---

### 5. Can you use social login without a backend?

**Yes**‚ÄîFirebase Auth handles token verification.

---

### 6. What issues occur on Android without Google Play Services?

Google login **fails** (e.g., Huawei devices).

---

## üîπ Common Pitfalls (good for interviews)

- Not adding correct **SHA-1 and SHA-256 fingerprints** for Android.
- Not configuring **reversed client ID** in iOS `Info.plist` for Google.
- **Missing Apple login on iOS** causing App Store rejection.
- Expecting Apple's name/email **after first login** (it won't come).
