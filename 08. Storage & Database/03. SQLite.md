# SQLite — Local Relational Database in React Native

---

## ✅ What is SQLite?

**SQLite** is a lightweight, embedded relational database that stores data locally on a device.

In React Native, SQLite is commonly used for:

- Offline data persistence
- Large structured datasets
- Complex queries (joins, indexing, filtering)

Unlike key-value storage (e.g., AsyncStorage), SQLite provides **tables, rows, and SQL queries**.

---

## ✅ Why Use SQLite in React Native?

Use SQLite when:

- ✅ You need offline-first functionality
- ✅ You are handling large datasets
- ✅ You need complex queries or relationships
- ✅ You want better performance than key-value storage

---

## ✅ SQLite vs AsyncStorage (Interview Comparison)

| Feature       | SQLite                 | AsyncStorage           |
| ------------- | ---------------------- | ---------------------- |
| Data Type     | Relational (tables)    | Key–Value              |
| Query Support | ✅ Full SQL            | ❌ No                  |
| Performance   | ✅ High for large data | ❌ Slower              |
| Transactions  | ✅ Supported           | ❌ Not supported       |
| Use Case      | Offline DB, caching    | Small settings, tokens |

---

## ✅ Interview tip:

> "SQLite is preferred when data is relational and requires querying."

---

## ✅ How SQLite Works in React Native

SQLite runs **locally inside the device**, not on a server.

**Flow:**

1. Create/open a database
2. Create tables
3. Insert / read / update / delete data using SQL
4. Query data when needed

---

## ✅ Popular SQLite Libraries for React Native

- `react-native-sqlite-storage`
- `expo-sqlite` (for Expo apps)

✅ **Interview note:** Expo SQLite is simpler but less flexible than native SQLite libraries.

---

## ✅ Basic SQLite Example (React Native)

### Open Database

```javascript
import SQLite from 'react-native-sqlite-storage';

const db = SQLite.openDatabase(
  { name: 'app.db', location: 'default' },
  () => console.log('DB opened'),
  (error) => console.log('DB error', error)
);
```

### Create Table

```javascript
db.transaction((tx) => {
  tx.executeSql(
    'CREATE TABLE IF NOT EXISTS users (id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT, age INTEGER);'
  );
});
```

### Insert Data

```javascript
db.transaction((tx) => {
  tx.executeSql('INSERT INTO users (name, age) VALUES (?, ?)', ['John', 25]);
});
```

### Fetch Data

```javascript
db.transaction((tx) => {
  tx.executeSql('SELECT * FROM users', [], (_, result) => {
    console.log(result.rows.raw());
  });
});
```

---

## ✅ Transactions (Important Interview Topic)

### What is a Transaction?

A transaction ensures that **multiple database operations** complete all together or not at all.

- ✅ Prevents data corruption
- ✅ Improves performance
- ✅ Ensures consistency

```javascript
db.transaction((tx) => {
  tx.executeSql('UPDATE users SET age = 30 WHERE id = 1');
  tx.executeSql('UPDATE users SET age = 40 WHERE id = 2');
});
```

---

## ✅ SQLite vs Secure Storage (Interview Trap)

- SQLite ❌ **Not encrypted by default**
- Sensitive data (tokens, passwords) should be stored in **SecureStore / Keychain / Keystore**
- SQLite is best for **non-sensitive structured data**

---

## ✅ Pros and Cons

### ✅ Pros

- Offline support
- SQL querying
- High performance
- Persistent data

### ❌ Cons

- Boilerplate code
- No built-in encryption
- Manual schema migrations

---

## ✅ Common Interview Questions & Answers

### ❓ When would you choose SQLite?

✅ When data is **relational, large, and requires complex queries** or offline support.

### ❓ Is SQLite secure?

✅ **No**, data is stored in plain text by default. Encryption must be added separately.

### ❓ Can SQLite work offline?

✅ **Yes**, it's fully local and offline-capable.

### ❓ Is SQLite asynchronous?

✅ **Yes**, operations are async, often wrapped in transactions.

---

## ✅ One-Line Interview Summary

> "SQLite in React Native is a lightweight local relational database used for offline storage and complex queries where key-value storage is insufficient."
