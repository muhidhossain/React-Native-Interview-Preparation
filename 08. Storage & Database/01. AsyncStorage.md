# AsyncStorage â€” Local Persistent Storage in React Native

---

## âœ… What is AsyncStorage in React Native?

**AsyncStorage** is a simple, unencrypted, persistent, keyâ€“value storage system used in React Native to store small amounts of data locally on a user's device.

It is commonly used to store:

- User authentication tokens
- App preferences (theme, language)
- Flags (onboarding completed, first launch)
- Cached API responses (small data)

---

## âœ… Package & Setup

AsyncStorage is not part of core React Native anymore.

It is provided by:
`@react-native-async-storage/async-storage`

**Installation:**

```bash
npm install @react-native-async-storage/async-storage
cd ios && pod install
```

---

## âœ… How AsyncStorage Works

- Stores data as **string keyâ€“value pairs**
- **Asynchronous** (returns Promises)
- Data **persists** even after app restart
- **Platform dependent:**
  - **Android:** SharedPreferences / SQLite
  - **iOS:** UserDefaults / SQLite

---

## âœ… Basic API Methods (Important for Interviews)

### 1ï¸âƒ£ Store Data

```javascript
import AsyncStorage from '@react-native-async-storage/async-storage';

await AsyncStorage.setItem('userToken', 'abc123');
```

### 2ï¸âƒ£ Retrieve Data

```javascript
const token = await AsyncStorage.getItem('userToken');
console.log(token);
```

### 3ï¸âƒ£ Remove Data

```javascript
await AsyncStorage.removeItem('userToken');
```

### 4ï¸âƒ£ Clear All Storage

```javascript
await AsyncStorage.clear();
```

âš ï¸ **Warning:** Clears everything for the app.

---

## âœ… Storing Objects

AsyncStorage only stores **strings**.
You must serialize objects.

```javascript
const user = { id: 1, name: 'John' };

await AsyncStorage.setItem('user', JSON.stringify(user));

const storedUser = JSON.parse(await AsyncStorage.getItem('user'));
```

---

## âœ… Error Handling (Important)

```javascript
try {
  await AsyncStorage.setItem('key', 'value');
} catch (e) {
  console.error('Storage failed', e);
}
```

---

## âœ… When Should You Use AsyncStorage?

### âœ… Good for:

- Small, simple data
- App configuration
- Tokens (âš ï¸ non-sensitive only)

### âŒ Not suitable for:

- Large datasets
- Complex relational data
- Highly sensitive data (passwords, secrets)

**For sensitive data, use:**

- Secure storage libraries (Keychain / Keystore)

---

## âœ… Performance Considerations

- AsyncStorage runs on the **JS thread**
- Large reads/writes can cause **UI lag**
- Avoid frequent read/write in render cycles
- Cache values in memory after reading once

---

## âœ… Common Interview Questions

### â“ Is AsyncStorage secure?

ðŸ‘‰ **No.** Data is stored unencrypted by default.

### â“ Can AsyncStorage store images?

ðŸ‘‰ **No.** Only strings. Store image URLs or file paths instead.

### â“ AsyncStorage vs Redux?

ðŸ‘‰ AsyncStorage is for **persistent storage**, Redux is for **in-memory state management**.

### â“ Is AsyncStorage synchronous?

ðŸ‘‰ **No.** It is asynchronous and Promise-based.

---

## âœ… Real-World Example (Auth Token)

```javascript
// Save token after login
await AsyncStorage.setItem('token', token);

// Read token on app start
const token = await AsyncStorage.getItem('token');
if (token) {
  navigateToHome();
}
```

---

## âœ… Key One-Line Interview Answer

> "AsyncStorage is an asynchronous, persistent, key-value storage system in React Native used to store small amounts of non-sensitive data locally on the device."
