# Expo Build Lifecycle (EAS Build, Publish & OTA Updates)

Expo provides a simplified ecosystem for building, deploying, and updating React Native apps. The three main components are:

- **EAS Build** â€“ building binaries (APK/AAB/IPA) in the cloud
- **EAS Submit** â€“ uploading builds to Play Store/App Store
- **Expo Publish & Expo Updates** â€“ sending over-the-air JS bundle updates without rebuilding

---

## 1ï¸âƒ£ EAS Build (Expo Application Services Build)

This is how you generate the native binaries required for the Play Store or App Store.

### What EAS Build does

- Builds Android (`.apk`/`.aab`) and iOS (`.ipa`) in the cloud
- Handles native dependencies, config plugins, credentials
- No need for Xcode or Android Studio locally

### Build Types

**Development build**

- Replaces Expo Go
- Contains your native modules
- Used for testing and debugging

**Preview build**

- Like a staging version to test before publishing on stores
- Installable via QR code on real devices

**Production build**

- Store-ready build
- Used when submitting to Google Play or Apple App Store

### Flow

```
Developer â†’ EAS Build â†’ Cloud Build Process â†’ Download .apk/.aab/.ipa â†’ Publish to Stores
```

### Common interview points

- EAS Build uses **config plugins** to apply changes to native code.
- EAS manages iOS certificates, provisioning profiles, keystores.
- Works even with custom native modules.

---

## 2ï¸âƒ£ EAS Submit

After building, you can directly submit your binary to the stores.

### What it does

- Uploads your `.aab` to Google Play Console
- Uploads your `.ipa` to App Store Connect
- Handles authentication tokens for stores

### Flow

```
EAS Build â†’ EAS Submit â†’ Play Store/App Store
```

---

## 3ï¸âƒ£ Expo Publish (Classic Publish)

(Used with `expo-updates`)

Expo Publish creates an **OTA (Over-The-Air) update** for JS and assets.

### What it does

- Uploads JS bundle + assets (images) to Expo's CDN
- App fetches new JS on next restart
- **No store release or rebuild required**

### What it cannot update

- Native code
- New permissions
- Changes in `app.json` affecting native layers
- New native libraries

**If you make changes requiring native code rebuild, you must run EAS Build again.**

### Flow

```
Publish â†’ Upload bundle to Expo CDN â†’ App downloads update â†’ Runs latest JS
```

---

## 4ï¸âƒ£ Expo Updates (Modern OTA update system)

When using `expo-updates`, you can:

- Control update frequency
- Use channels (production, staging, development)
- Roll back to older updates

### Update Strategies

- **"ON_LOAD"** â€“ apply updates before app starts
- **"BACKGROUND"** â€“ download silently and apply on next restart
- **"NONE"** â€“ disable auto updates

### Channels

Used for targeted rollouts:

- `production`
- `staging`
- `testing`

**Example:**

```bash
eas update --branch staging
```

---

## ğŸ§  How to explain lifecycle in an interview (short summary)

> Expo's build lifecycle involves building native binaries using **EAS Build**, distributing them via **EAS Submit**, and delivering JavaScript-only updates through **Expo Publish** or **EAS Update**. EAS Build is used when native code changes; Publish/Updates are used for OTA updates that don't require rebuilding. Expo manages credentials, config plugins, and cloud builds to simplify deployment.

---

## ğŸ“Œ When to use what?

| Action                    | Requires EAS Build? | Can use Publish/Updates? |
| ------------------------- | ------------------- | ------------------------ |
| JS changes (UI, logic)    | âŒ                  | âœ… OTA update            |
| Asset changes             | âŒ                  | âœ…                       |
| Add/remove native package | âœ…                  | âŒ                       |
| Change permissions        | âœ…                  | âŒ                       |
| Update app icon/splash    | âœ…                  | âŒ                       |
| Release to store          | Build â†’ Submit      | âŒ                       |
